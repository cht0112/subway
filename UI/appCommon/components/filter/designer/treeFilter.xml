<?xml version="1.0" encoding="UTF-8"?>
<elements>
	<element name="extTreeFilter" tag-name="div" icon="Control_ListTree.gif" text="下拉树形过滤" 
		binding-component="/UI/appCommon/components/filter.xbl.xml#treeFilter"
		display-property="id" component-class="TreeFilter" component-type="formControl"
		design-view="web-designer">
		<properties>
			<property name="id" text="编号" required="true" />

			<property name="filter-data" text="过滤数据集" required="true" is-id-ref="true" editor-ref="contextComponent" editor-parameter="data"/>
			<property name="filter-relation" text="过滤关系" required="true" editor-ref="relationDlg" editor-parameter="filter-data"/>
			<property name="default-value" text="当下拉列表选中数据为空时的过滤数据(xpath)" editor-ref="xpathEditor"/>
			<property name="default-label" text="当下拉列表选中数据为空时的显示文本(xpath)" editor-ref="xpathEditor"/>
			<property name="all-selected-label" text="全选显示(xpath)" editor-ref="xpathEditor"/>

			<property name="auto-refresh" text="当过滤条件改变时是否自动刷新数据（初始化过滤条件时不刷新）" default-value="true" editor-ref="booleanList" readonly="true"/>
			<property name="multi-select" text="多选" default-value="false" editor-ref="booleanList" readonly="true"/>
			<property name="cascade" text="级联勾选" default-value="false" editor-ref="booleanList" readonly="true"/>
			<property name="value-separator" text="多选 值分割字符"  default-value="," />
			<property name="label-separator" text="多选 label分割字符" default-value="," />
			
			<property name="auto-size" text="自动尺寸" default-value="false" editor-ref="booleanList" readonly="true"/>
			<property name="dropdown-height" text="下拉框高度" />
			<property name="delay" text="延迟加载" default-value="false" editor-ref="booleanList" readonly="true"/>
			<property name="smart-render" text="智能渲染" data-type="integer"/>
			<property name="delay-create-grid" text="延迟创建grid" editor-ref="booleanList" readonly="true" default-value="false"/>
			
			<group name="itemset">
				<property name="data-ref" path="xforms:itemset/@data" text="引用data" editor-ref="dataList" />
				<property name="auto-load-data" path="xforms:itemset/@auto-load-data" text="第一次下拉时触发data动态加载" editor-ref="booleanList" readonly="true" default-value="false"/>
				<property name="independence" path="xforms:itemset/@independence" default-value="false" text="为true时，多个select可以绑定同一个data，但只在下拉时刷新一次数据，数据改变后，需要用户主动触发刷新。" editor-ref="booleanList" readonly="true"/>
				<property name="columns" text="下拉表格列" path="xforms:itemset/@columns-description" type="complex" editor-ref="columnsDialog" readonly="true" is-virtual = 'true'  fixed-value='[...]' required="true"/>
			</group>
			<group name="column-ref"> 
				<property name="value" path="xforms:value/@ref" text="过滤数据列" editor-ref="cols" required="true"/>
				<property name="label" path="xforms:label/@ref" text="输入框显示列" editor-ref="cols" required="true"/>
			</group>
			<property name="style" text="样式" editor-ref="styleDialog" />
		</properties>
		
		<property-editors>
			<property-editor name="cols" type="list">
				<dynamic-data xpath="*[local-name()='itemset']/*[local-name()='column']/@ref"/>									
			</property-editor>
			<property-editor name="dataList" type="list">
				<static-data value=":无"/>
				<dynamic-data xpath="//*[local-name()='data']/@id" search-from-root="true"/>								
			</property-editor>
			<property-editor name="dataDialog" type="dialog">
				<dialog-page class-name="SelectItemsetDataPage"/>				
			</property-editor>
			<property-editor name="columnsDialog" type="dialog">
				<dialog-page class-name="SelectColumnPage"/>				
			</property-editor>
		</property-editors>
		
		<events>
			<event name="onGetCondition" text="构造过滤条件"/>
			
			<event name="onRowDisabled"  text="行是否可选"/>
			<event name="onAfterRowFill"  text="行渲染结束"/>
			<event name="onShowNodeImg"  text="树节点图标"/>   
			<event name="onRowExpand"  text="展开节点"/>
		</events>

		<templates>
			<template name="default">
				<![CDATA[ 
				<xhtml:div component="/UI/appCommon/components/filter.xbl.xml#treeFilter" style="width:140px" all-selected-label="'全部'">
					<xforms:label/>
				   	<xforms:value/>
				   	<xforms:itemset>
				   	</xforms:itemset>
				</xhtml:div>
		   		]]>
		   </template>
		</templates>
	</element>
</elements>